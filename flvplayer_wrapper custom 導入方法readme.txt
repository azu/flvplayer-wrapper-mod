★はじめに

これは flvplayer_wrapper 2007/10/10版 を勝手に改造したものです。
flvplayer_wrapperの作者様に感謝。

素人が適当にいじったものなのでいろいろ不備があるかもしれません。
おかしなところがあったら指摘してもらえると助かります。


＊現在swf動画では動作しなくなっています。

★使用方法
とりあえず動作させるための使用方法のみ書いてあります。
より詳しい解説はオリジナルのドキュメントを読んで下さい。

★下のほうにあるフィルターを2つ入れる。
　１nicoplayer.swfをflvplayer_wrapper.swfに書き換えるフィルタ
　２それをローカルファイルに$RDIRするフィルタ

★flvplayer_wrapper.swfをオミトロンのhtmlフォルダに入れる。

★flv_booster（コントラスト・輝度調節機能）を使う場合は、フィルター３と flv_booster.swf を入れる。
　（Nicocache_nlを使用する場合はNicocache_nlのlocalフォルダに flv_booster.swf を入れる。この場合フィルター３は必要ないと思います。）
　flv_boosterの仕様についてはブースター仕様書を読んでください。

で終わりです。

flvplayer_wrapperではフラッシュのサイズを標準とは違う値に変更するため、「動画の上にあるニュース部分を隠す」などのフィルターを使っていると
フラッシュの一部が見切れてしまう場合があるので注意してください。
iroiroと併用していてフラッシュの一部が隠れてしまった場合は、iroiro.jsを編集して設定を変更することで解決できるかもしれません。

※iroiro併用時全画面化できない場合は、NicoVideo_iroiro.jsを編集して"input_area"を"inputarea"にすべて置換してください。

※11/4以前のiroiroを使用している場合、全画面時の表示が下にずれてしまいます。
その場合はiroiroをwikiの最新版に更新してください。

★フィルター１
　flvplayer.swfをflvplayer_wrapper.phpに置き換える（オリジナルから変更：要求をwww.nicovideo.jpに）
　flvplayer_containerのStyleのheightを540px→510pxにする
　flvplayer(_wrapper).swfのheight?を540→510にする
　
　（補足）
　・Replaceの二箇所にある510を540に変更すると、コマンドバーが下部に表示されるようになります。
　・Replaceの#FFFFFFの部分でflvplayerの背景色を指定できます。

[Patterns]
Name = "NicoVideo: FlvPlayerWrapper1 ReplaceWrapper custom 090430" 
Active = TRUE 
URL = "www.nicovideo.jp/watch/$TYPE(htm)" 
Limit = 1024 
Match = "(id=$AV(flvplayer_container))\1 style=\2height:512px;\3new SWFObject\("\4/new/nicoplayer.swf\5$AV(512)\6$AV(#FFFFFF)$STOP()" 
Replace = "\1 style=\2height:510px;\3new SWFObject("flvplayer_wrapper.swf\5 "510"\6"#FFFFFF"" 

＊現在swf動画では動作しなくなっているためnm以外の動画のみで使うフィルタ
[Patterns]
Name = "NicoVideo: Set flvplayer_wrapper"
Active = TRUE
URL = "www.nicovideo.jp/watch/(^nm)$TYPE(htm)"
Limit = 1024
Match = "(<div)\#("
        "[^>]++\sid=$AV(flvplayer_container)&"
        "([^>]++\sstyle=)\#$AVQ((*height : )\#[0-9]+{3}$SET(\#=510)( px*)\#)"
        ")|"
        "(new\sSWFObject \( )\#"
        "$AV(*/nicoplayer.swf(\?*)\0)$SET(\#="http://www.nicovideo.jp/flvplayer_wrapper.swf\0")"
        "( , $AV([a-z]+{1,*}) , $AV([0-9]+{3}) , )\#$AV([0-9]+{3})$SET(\#="510")(^(^ ,))$STOP()"
Replace = "\@"


★フィルター２
　flvplayer_wrapper.swfとその他のswfをローカルファイルにリダイレクトする
　<del>旧プレイヤー用のswfがニコニコ動画のサーバから消えてしまったので、</del>
　nico_wrapperフォルダをフォルダごとオミトロンのhtmlフォルダへ入れておく。
　wwwでもresでも動くようにオリジナルから変更

[HTTP headers]
In = TRUE
Out = TRUE
Key = "URL: NicoFlvplayerWrapper2 Redirect custom 071011 (both)"
Match = "http://(www|res).nicovideo.jp/flvplayer_wrapper.swf(\??++ts=[0-9]+)\1(^?)"
Replace = "$RDIR(http://local.ptron/flvplayer_wrapper.swf\1)"

ローカルファイルにリダイレクトする場合
[HTTP headers]
In = FALSE
Out = TRUE
Key = "Redirect wrapper"
Match = "http://www.nicovideo.jp/swf/([^./]+.swf*)\1"
Replace = "$RDIR(http://local.ptron/nico_wrapper/\1)" 

★フィルター３
　flv_booster.swfをローカルファイルにリダイレクトする
　flv_boosterを使用する場合に必要です。


[HTTP headers]
In = TRUE
Out = TRUE
Key = "URL: NicoFlvplayerWrapper3 Redirect flv_booster 080314 (both)"
Match = "http://(www|res).nicovideo.jp/flv_booster.swf\1"
Replace = "$RDIR(http://local.ptron/flv_booster.swf\1)"


ローカルファイルにリダイレクトしてるなら
NicoVideo UseOldPlayer はもう必要ないと思います。
[HTTP headers]
In = FALSE
Out = FALSE
Key = "URL: NicoVideo UseOldPlayer (out)"
Match = "(http://www.nicovideo.jp/watch/[^nm][a-z0-9]+)\0((\?*)\9$SET(1=\9&oldplayer=1)|$SET(1=?oldplayer=1))"
Replace = "$RDIR(\0\1)$STOP()"



カスタムフィルタの使い方
★指定可能なコマンド
　place=(ue|shita|normal)
　color=(all|normal|premium|red|blue|以下コメントに使える色)
　　all→色がついているコメント
　　normal→色なしコメント
　　premium→premiumの色
　　内部的にはpremiumの色を総当りチェックしているので、理論上はちょっと重くなる
　size=(big|small|normal)
　mes=なんかの文字
　　エスケープ文字の処理をしていないので、「=」「&」「(」「)」などを指定することができない
　vpos=数字
　　指定された数字の前2秒、後2秒、合計4秒のコメントをフィルタリングする

ex)
place=(ue|shita)&color=red
上下の赤文字を消す

size=big&color=all
 色付大文字を消す

mes=(ゆとり|信者|アンチ|厨)
「ゆとり」または「信者」「アンチ」「厨」が含まれるコメントを消す

vpos=(2|3)&size=big
動画の開始5秒の大文字を消す



★既知の問題

○mp4動画で再生する前にシークすると異常再生される。動画の先頭に戻ると直る。

○部分部分ににじみ等の破綻が生じる。
	・サイズを特にいじらなくてもどこかで縮小（？）のような現象が起きているようだ。
	・swf8では発生しない模様。

○たまにコンボボックス及び過去ログの日付ボタンが効かない場合がある。
	・ページのキャッシュが無い時に発生する？何回かリロードすれば直るかもしれない。
	・「_lockrootを設定していないと外部swfのコンボボックスが開かない」に近いが、_lockrootは設定されている。
	・swf7以降では発生しない模様。

○強調表示時にコメント取得が起きるとログリストがクリアされる。

○マイメモリー再生時にsm○○.flvのローカル再生ができない。
	・一応、マイメモリーのID.flvを置いておけばローカル再生自体はできる。
	・wrapperの動作順序を変更しないと無理か？

○「全画面時入力部を押し出す」使用かつiroiro未使用時は、最大化時にウィンドウをリサイズしてもflashはリサイズされない（仕様）。
	・onResizeのタイミングがブラウザによって違うため。

○なぜかFirefoxとOperaではJavaScriptからbgcolor、quality、flashvarsなどが参照できない。
	・bgcolorで背景色を変更できない。→深度-10000に黒いムービークリップbgを置いて解決。

○なぜかSelection.setFocus(null)が効かない。focusManager.setFocus(null)も効かない。
	・Selection.setFocus(bg)を実行するようにした。

○UIコンポーネントにfocusManagerの緑枠が付く。これ自体は問題無いが、セレクトリストを選択した場合緑枠が残ってしまう。

■swf7関連

○オススメ動画のリンクに下線がつくので画像のみをリンクするようにしたが、画像をリンクするとなぜか投稿日時の前にゴミがつく。

○loadMovieがなぜか効かないのでMovieClipLoaderを使って読み込むようにした。
	・swf6ではMovieClipLoaderは使えないので切り替え式で。

○なぜかremoveMovieClipが効かない。応急処置として非表示にした。
	・unloadClipは効くが、いろいろなものが残ってしまう。

○タブメニューのフォントのスペーシングがなにやらおかしかったのでとりあえずフォントを_sansに設定、letterSpacingを0に。
	・swf6、swf8では発生しない。

■swf8関連

○pngが正常に表示されない。（0.4.0.betaのライブラリの問題かもしれない）
	→png2dblで変換したdblを使うと画像が赤い四角（デコード失敗？）に。ming-0.3.0.beta1でも同様。環境依存かも。
	→jpgは問題ないのでとりあえずjpgにする。


★変更履歴

★flvplayer_wrapper custom 2008-06-29 01:00版
○nicoplayer0620の仕様に暫定対応。UIの緑枠が残ったりします。
○NGIDの保持件数、保持期限を設定できるようにした。
○ホイールクリックの一時停止に「動画クリックで一時停止」が必要になっていたのを修正。
○コメント編集時、非表示になっているコメントが判別できなかった問題を修正。
○投稿者コメント欄にはIDを表示しないようにした。
○swf動画の読み込み中に再生できなくなっていた問題を修正。

★flvplayer_wrapper custom 2008-04-18 06:00版
○nicoplayer0416の仕様に対応。
○自動リンクでページ情報の読み込みに失敗していたのを修正。
○flash外のホイールクリックに誤反応する場合があった問題を修正。
○比率変更のメニュー条件を少し修正。
○コメント透明度指定でコメントマスク領域が白く表示される問題を修正。
　それに伴い、各コメントの透明度が一律（投稿日時に関わらず）指定された透明度になります。
○ログリストの行間を元に戻した。
○投稿者コメントのIDも表示するようにした。
○「ブラウザ：動画上にID表示」を実装。
○右クリックメニューを少し増やした。
○キーボード操作がオンの場合、メインバーもしくは動画表示部のクリック時にIMEをオフにするようにした。
○flash読み込み時、NGIDされたコメントがログリストからも消えるようにした。
○同梱のflv_boosterを3/18のものに更新した。

★flvplayer_wrapper custom 2008-03-17 17:00版
○「コメント詰まり対策」使用時にコメント保持数が無制限になってしまう問題を修正。
○コメントの再読み込み時、コメントデータが空になっていなかった問題を修正。
○「背景を黒くする」で背景が薄い灰色になっていた問題を修正。
○TubePlayer併用時の以下の問題を修正。
　・ニコスクリプトが正常に働かない
　・リピートが効かない
　・オススメタブに移動しない
　・ログリストのコメントをクリックでコピーできない
　・ログリストのコメントから抽出やNGIDができない
　・ログリストのソート列が保存されない
　・ログリストからシークできない
　・Enterでコメントを送信できない
○ログリストで選択したコメントに含まれるリンクを自動リンクするようにした。

★flvplayer_wrapper custom 2008-03-17 03:00版

○自動リンクの情報がうまく取得できなかった問題を修正。
○swf7で「リンクを別窓で開く」がオススメタブの動画タイトルのリンクに適用されていなかった問題を修正。
○swf7でログリスト類のコンテキストメニュー「IDをコピー」「本文をコピー」の有効判定がおかしかった問題を修正。
○「再生に合わせてスクロール」使用時、過去ログのログリストが更新されない問題に多分対処。
○左クリックでも時計を切り替えられるようにした。
○ログリスト類の行間を少し詰めてみた。
○ニコスクリプトなどの投稿者コメントを表示するようにした。
○フィルタータブを有効にした。

■swf8関連
mingを0.3.0.beta1→0.4.0.beta（ http://kromann.info/ の PHP 5.2 Release_TS より）に変更してswf8でコンパイルしたテスト版。
○いくつかのパッケージが使えるようになったものの、flash.net.URLRequestなど、使えないパッケージ（undefined）もあるようだ。
○nicoplayerの画像類がシャープになった。画像破綻が解決。
○swf7の問題だった「○タブメニューのフォントのスペーシングがなにやらおかしい」が解決。
○dojavascriptではflash.external.ExternalInterface.callを使うようにした。

★flvplayer_wrapper custom 2008-3-15 17:00版
○ミュートが無効になる問題を修正。
○FlashPlayerのバージョンが古くmp4動画を再生できない場合に、FlashPlayerの更新を促すメッセージが表示されなかった問題を修正。
■swf7関連
swf7で特に問題無さそうなのでswf7をルートフォルダに入れるようにした。
○右クリックメニューを少し増やした。

★flvplayer_wrapper custom 2008-03-14版
○0313のnicoplayerの更新に対応。
○flv_boosterが使えなかった問題を修正。
　使うためには同梱テキストのフィルター３を導入する必要があります。Nicocache_nlから使用する場合は導入しなくても多分動きます。
○強調表示からの復帰時、ログリストのソートが不正確だった問題を修正。
○swfに自動再生許可が適用されなかった問題を修正。
○自動リンクのマイリストでタイトル解析に失敗していた問題を修正。
○自動リンクのマイリストの下部には説明文を表示するようにした。また下部をクリックでマイリストを開くようにした。
○標準でスムージングされるようになったので「動画再生：常にスムージング」を廃止、「動画再生：スムージングしない」を実装。
○時計の簡易情報表示でmp4及びswfの情報を少し増やした。
○nicoplayerを完全に読み込むまでplayerを非表示にした。
■swf7に関して
＄useswfversion=7でコンパイルしたテスト版。特に問題が無ければこれで作っていきます。
移行による不具合はぱっと見てわかる限り修正したものの、見落としがあるかも。
○たまにコンボボックス及び過去ログの日付ボタンが効かない場合がある問題が解決したかもしれない。
○オススメ動画のリンク部分に下線がつくので、全体ではなく画像のみにリンクを追加するようにした。

★flvplayer_wrapper custom 2008-03-06版
○「コメント詰まり対策」を使用しているとコメント等の情報が読み込まれない場合があった問題を修正。
○mp4動画を開いた時「動画再生エラー」が表示される問題を修正。（応急処置）
○「強引に後方シーク」を前方シークに対応して「強引にシーク」に変更。変更に伴い、一度チェックが外れます。
○ローカルサーバからmp4、swfを読み込めるようにした。

★flvplayer_wrapper custom 2008-03-04版
○自動リンクでマイリストが読み込まれなかった問題を修正。
○"http://〜"の自動リンクを[B]ボタンで開いた場合URLがおかしかった問題を修正。
○nicoplayerのNGボタンを非表示にした。
○nm〜の動画を見られるようにした。時報を切っていなければ、ゲーム（？）も動作するかも。

★flvplayer_wrapper custom 2008-03-03版
○0303のnicoplayerの更新に対応。
○コメント中の"http://..."を自動リンクするようにした。（動画説明文はリンクされません）
○TubePlayerで読み込み中画像が消えない問題に対処。
　（この問題以外にもTubePlayerとの併用ではリピートや再生後オススメタブへ移動などいくつかの機能が動作しません。）
○フィルター３をテキストから削除。
○最大化時のvideowindowのx座標を中央に変更。
○ログリストにフォーカスが移らないようにした。

★flvplayer_wrapper custom 2008-02-13B版
○ニコスクリプトが正常に実行されなかった問題を修正。

★flvplayer_wrapper custom 2008-02-13版
○flvplayerのパス変更に対応。それに伴いフィルター１をMatchのファイル名のみ変更。
○強調表示・解除時のログリスト動作を少し改善。
○透明化の表示時間=0のとき入力部が消えない場合があった問題を修正。
○ブラウザ：「再生後オススメタブに移動しない」を実装。
○コメント：「コメント詰まり対策 (動画の後にコメントを読み込む)」を実装。

★flvplayer_wrapper custom 2008/01/29版
○「ログリストを自動スクロール」を廃止。
　コメント受信中は自動スクロール、ログリストをスクロールするとコメント受信解除。（flvplayerの挙動）
○読み込み時にログリストが最新の位置にスクロールされなかったのを修正。
○「JavaScriptを使う」をONに固定、設定画面から撤去。
○1/29のflvplayer更新に多分対応。

★flvplayer_wrapper custom 2008/01/19版
○透明化使用時、最大化時に入力部が消えない場合があった問題を修正。
○透明化不使用時、最大化時にヘッダ部が動画に被る問題を修正。
○キーボード操作使用時にEnterでコメント投稿に失敗すると全画面化してしまう問題を修正。
○ヘッダを少し小さくした。
○システム欄にwrapperのバージョンを表示するようにした。
○時計をホイールクリックで簡単な動画情報に切り替えるようにした。

★flvplayer_wrapper custom 2007/12/28版
○ヘッダ、強調表示関連の表示を修正。
○システムタブのコメント非表示チェックの不具合を修正。
○公式NG設定機能の設定数増加に対応。
○コマンドバーの↑の動作の不具合を修正。
○透明化使用時、二秒間操作がなければマウスカーソルを消すようにした。
○透明化使用時に邪魔にならないようにヘッダ部のアイコンやテキストのクリック判定を消した。
○シークバー上のホイールでシーク、音量バー上のホイールで音量調節するようにした。

★flvplayer_wrapper custom 2007/12/24版
○上の枠線が消えていた問題を修正。
○「ログリストを縮める」不使用時、ログリストを下の枠線に重ならないようにした。

★flvplayer_wrapper custom 2007/12/23C版
○IEで「動画をホイールチェックで一時停止」がうまく動作しなかった問題（12/23B版から）を修正。

★flvplayer_wrapper custom 2007/12/23B版
○「動画クリックで一時停止」がうまく動作しなかった問題（12/23版から）を修正。
○Firefox及びOperaでも動画をホイールクリックで一時停止できるように変更。
ただしホイールチェックの方式を変えたため、処理落ちしたりホイールクリックの入力が短かったりすると入力を取りこぼす可能性があります。
その場合は少し長めに押すようにしてください。

★flvplayer_wrapper custom 2007/12/23版
○"watch/○○"の自動リンクでフリーズする場合があったバグを修正。
○テキストボックスにフォーカス時、再生ボタンが反応しない場合があった問題を修正。

★flvplayer_wrapper custom 2007/12/22版
○iroiro併用時の、弾幕グラフ、情報欄、プレミアムボタン等に関する不具合を多分修正。
○動画をホイールクリックで一時停止するようにした。（デフォルト機能）
○「操作：動画クリックで一時停止」を実装。こちらは強調表示解除中にコメント以外の部分をクリックした場合のみ動作します。
○「コメント：コメントの透明度を指定」を実装。

★flvplayer_wrapper custom 2007/12/20版
○投稿者フィルターが効かない場合があった問題を修正。
○自動リンクをマイリストの新URLに対応。
○自動リンクをコメントの"watch/[0-9]+"、"mylist/[0-9]+(/[0-9]+)"、"ax"、"yo"に対応。
○自動リンクのマイリストは自動で情報を読み込むようにした。
○透明化の表示時間=0の挙動を変更。(常時表示 → マウスカーソルをUI上に置いた場合のみ表示)
○「リンクを別窓で開く」使用時は、ニコスクリプトのジャンプ及びお勧め動画のリンクを別窓で開くようにした。
○「太いシークバー」を復活した。
○「コメントIDをコピー」「コメント本文をコピー」はログリストのコメントをクリックした場合もコピーするようにした。
○オススメタブ表示時に再生ボタンを押した場合、最新コメントタブを表示するようにした。
○動画の末尾で再生ボタンを押した場合、動画の先頭に戻るようにした。

★flvplayer_wrapper custom 2007/12/05版
○広告の枠線を隠した。ただし透明化したヘッダを表示している状態では表示されます。

★flvplayer_wrapper custom 2007/12/04版
○設定メニューとNGIDメニューの初期位置を変更。
○「開始時にシステムタブを表示」使用時、最新コメントタブを開くまでコメントが自動更新されなかった問題を修正。
○TubePlayerと併用すると投稿者フィルターが効かなかった問題を修正。
○再生時間の表示がおかしかったのを修正。

★flvplayer_wrapper custom 2007/11/28版
○UI透明化時、マウスカーソルがUI上にある間はUIを非表示にしないように変更してみた。
○強調表示以外では"[投稿者]"を表示しないように変更。
○コメント編集時は「開始時にシステムタブを表示」を無効にした。
○投稿者コメント編集時は強調表示を無効にした。
○非公開のニコスクリプトを含む投稿者コメントがうまく強調表示できなかった問題を修正。
○単一コメント内の二個目以降の動画アドレスに対して自動リンクがうまく動かなかった問題を修正。
○「ヘッダ部を消去」や「ヘッダ部を透明化」を使用していない場合、ヘッダ部が動画に少し被っていたのを修正。

★flvplayer_wrapper custom 2007/11/27版
○コマンドバーの白ボタンは"white"を入力するようにした。
○TubePlayerと併用するとコメントが表示されなかった問題を修正。
○「全画面時：背景を黒くする」を実装。
○ついでに、フィルター１を背景色が指定できるように変更してみた。
○「コメント：開始時にシステムタブを表示」を実装。
○「コメント：ニコスクリプトを無効にする」を実装。

★flvplayer_wrapper custom 2007/11/26版
○とりあえずわかる範囲でニコスクリプトに対応。
○全画面時の透明化使用時、ヘッダ部付近・入力部付近以外でマウスを動かしても非表示を解除しないようにしてみた。
○コマンドバーの色の並びを変更した。（なんとなく）

★flvplayer_wrapper custom 2007/11/19B版
○入力部自動非表示時に全画面化を解除するとコントローラーが消えてしまう問題を修正。
○ホイールを使ったときも自動非表示を解除するようにした。

★flvplayer_wrapper custom 2007/11/19版
○動画上部に広告の判定があった問題を修正。

★flvplayer_wrapper custom 2007/11/18版
○「全画面時：ヘッダ部を透明化」を実装した。また、全画面時の設定を少し整頓した。テキスト部分が透明にならないのは仕様です。
○「全画面時入力部を透明化」使用時、入力部の位置がおかしくなることがあった問題を修正。
○コメント編集時の「選択中のユーザーをチェック」ボタン（11/15新機能）を非表示にした。

★flvplayer_wrapper custom 2007/11/15版
○「全画面時入力部を透明化」を実装した。二秒間操作しないと入力部が完全に非表示になります。
○フィルター１のwrapperのサイズを540にした場合、コマンドバーを下部に配置するようにした。
　それに伴いフィルター１のテキストの補足を更新。
○コマンドバーにゼロ幅文字（零幅）ボタンを追加。
○コマンドバーの"blue"と"ue"の認識が被っていた問題を修正。
○とりあえずコマンドバーにアスペクト比変更（4:3、16:9）、スムージング（滑）のボタンを置いた。
○動画タイトルのコピー時、NTFSのファイル名に使用できない文字を変換するようにした。

★flvplayer_wrapper custom 2007/11/14版
○自動リンクが自動表示されたときもタグとマイリストを検索するようにした。
○「低画質のみスムージング」によってスムージングされた場合、もしくはキーボードからスムージングを切り替えた場合、スムージングのON/OFFを表示するようにした。
○iroiro風のコマンドバーを実装した。
　キーボード操作に「C:コマンドバー表示・非表示」を追加。元あった「コメント表示・非表示」は「H（Hide comments）」に移動。

★flvplayer_wrapper custom 2007/11/12B版
○キーボード操作でキーコードが表示されたり「DL」「設定」「NGID」「LINK」を使うといろいろおかしかったりしたのを修正。

★flvplayer_wrapper custom 2007/11/12版
○NGID一覧表示中にコメントを受信すると、一覧が更新されないために指定したNGIDが削除できない場合があった問題を修正。
○NGIDを指定して削除してもログリストに表示されなかった問題を修正。
○「動画再生：常にスムージング」を追加。
○キーボード操作に S：スムージング を追加。「DL」「設定」「NGID」「LINK」も頭文字で押せるように。
○設定の操作タブにキーボード操作一覧（適当）を貼った。
○動画にキーフレーム情報がある場合はキーフレーム情報を元にシークするように変更。

★flvplayer_wrapper custom 2007/11/10B版
○指定したNGIDを削除できるようにした。
○強調表示モード中にログリストのアイテムを選択してもID抽出を行わないように変更。
○「強引に後方シークする」使用時、後方シーク中に連続して後方シークするとシークし直したり一時停止状態になる問題を修正。
○「強引に後方シークする」が少しうるさいので、後退シーク量の半分以上後退したらシークをやめるようにした。

★flvplayer_wrapper custom 2007/11/10版
○「コメントを抽出」ボタン表示中に動画上のコメントをクリックしたとき「コメントを抽出」ボタンが消えない問題を修正。
○キーボード操作に Enter：全画面化・解除、BackSpace：動画の先頭に戻る、C：コメントの表示・非表示、M：ミュート、R：リピート を追加。
○コントローラにフォーカスが当たっていてもキーボード操作ができるようにした。
○全角入力時はキーを判別できないので判定を削除。
○「操作：強引に後方シークする」を実装。キーフレーム間隔が後退シーク量より大きい場合に後方シークできない問題を解決できるかもしれないオプション。
　後方のキーフレームに飛ぶまでシーク量を倍々に増やしつつシークするが、シーク時間が10フレームを越える環境ではまともに動かないと思われる。

★flvplayer_wrapper custom 2007/11/08版
○Firefox及びOperaで「全画面時入力部を押し出す」を使っている場合、全画面からうまく元に戻らないことがあった問題に少し対処。
　これにより「全画面時入力部を押し出す」使用かつiroiro未使用時は、全画面時にウィンドウをリサイズしてもflashはリサイズされなくなります。
○「全画面時背景を黒くする」がIE以外に効かないので設定項目を削除。
○RC2から「リピートの終点を指定」画面及び自動リンクの表示位置がずれていたのを修正。
○ログリストのコメントを選択時、「コメントを抽出」ボタンを表示するようにした。
○「操作：キーボード操作」を実装した。スペース：一時停止・再生、左右：シーク、上下：音量調節。調節値はホイール操作の設定値を使う。
　「キーボード操作」使用時はビデオウィンドウをクリックすることでフォーカスが移るようにした。

★flvplayer_wrapper custom 2007/11/06版
○コメント編集時、強調表示モードのボタン類が表示されなかった問題を修正。
○コメント編集時、非表示チェックボックスの状態を保存するようにした。
○ページ読み込み時、ログリストのNGコメント非表示がうまくいかなかった問題が修正しきれていなかった問題を修正。
○設定画面に「操作」タブを作り、項目を少し整理した。
○「全画面時背景を黒くする」を実装した。

★flvplayer_wrapper custom 2007/11/05版
○ページ読み込み時、ログリストのNGコメント非表示がうまくいかなかった問題を修正。
○コメント編集時の文章と完了ボタンがずれていたのを修正。

★flvplayer_wrapper custom 2007/11/04C版
○flv_boosterのオン・オフ及びurlを設定可能にした。
○ログリストのコメントクリック時に標準のボタンではなく「NGIDに追加」ボタンを表示するようにした。
○NGコメントはログリストに表示しないようにした。
○リサイズ時、入力部の位置がずれることがあった問題を修正。

★flvplayer_wrapper custom 2007/11/04B版
○全画面時に強調表示モードが表示される問題を修正。また、全画面時も左下（コメント入力欄の左方）に「NGIDに追加」ボタンを表示するようにした。
○設定画面のタブがウィンドウの後ろに行かなかった問題を修正。
○「低画質は自動でスムージング」の判定がうまくいかない場合があった問題をある程度対処。

★flvplayer_wrapper custom 2007/11/04版
○全画面時のリサイズを修正。iroiroのズレ修正機能が必要なくなったのでその部分を修正した（つもりの）iroiroを同梱。
○タブ切替時に強調表示のボタン類の表示を切り替えるように変更。
○flv_boosterを同梱＆読み込むようにした。
○設定画面を「ブラウザ」「動画再生」「コメント」にタブ分けした。以下の設定項目を追加。
　「リンクを自動表示」「リンクを別窓で開く」
　「最大化時ヘッダ部消去」「最大化時入力部を押し出す」
　「スムージング（設定は保存されない）」「低画質は自動でスムージング」
　「投稿者フィルターを透過」

★flvplayer_wrapper custom 2007/11/01D版
○iroiro併用時の全画面表示を修正。

★flvplayer_wrapper custom 2007/11/01C版
○全画面時の表示が狂っていたのを修正。

★flvplayer_wrapper custom 2007/11/01B版
○自動リンクONで公式NG機能を利用した場合にスクリプトが停止してしまう問題を修正。
○ログリストのボタン類の表示を変更してみた。

★flvplayer_wrapper custom 2007/11/01版
○コメントから自動リンクを取得する処理を変更。
○動画DLの処理を元に戻した。
○最大化時のレイアウトを少し改善。

★flvplayer_wrapper custom 2007/10/27版
○NG設定タブの仕様変更に対応。
○自動リンク、動画DLの処理を変更。
○暫定的に自動リンクのホイールクリックを廃止。使ってた人がいたらちょっと考えます。
○LINKボタンの挙動を、設定ボタン等と同様に「LINKウィンドウを開く・閉じる」にした。

★flvplayer_wrapper custom 2007/10/19C版
○「ホイールで音量調節」の数値が保存されなかった問題を修正

★flvplayer_wrapper custom 2007/10/19B版
○投稿者コメントの強調表示時、IDが正常に表示されていなかった問題を修正

★flvplayer_wrapper custom 2007/10/19版
○試聴者コメントに対応したつもり
○フィルタータブが使えなかった問題を修正
○「最初にコメントを隠す」を「自動コメント非表示」と「ログリストを隠す」に分割
○「DL時タイトルをコピー」を実装
○設定項目の配置を少し変更

★flvplayer_wrapper custom 2007/10/18版
○player: 2007-10-18 20:30の仕様に対応したつもり
○プレミアム動画でコメントがログに表示されなかった問題を修正したかもしれない
○「Enterでコメント送信しない」「最初にログを隠す」「別窓でDLする」を実装
○ホイールシークとホイールで音量調節の項目表示が被ることがあったのを少し修正
（ウィンドウを複数開いてそれぞれ違う設定にしたりすると表示がおかしくなるので注意）

★flvplayer_wrapper custom 2007/10/17B版
○「→リピートの終点を指定」ボタンが消えていた問題を修正。すみません。

★flvplayer_wrapper custom 2007/10/17版
○投稿者コメントの表示に対応したつもり（NGIDやフィルターは不可）
○ホイールによる音量調節機能のON-OFFを設定できるようにした（ホイールシークとの選択）
○動画タイトルコピー時に「（低画質モード）」などを付加するように変更、動画ダウンロード処理も少し変更

★flvplayer_wrapper custom 2007/10/16_2版
○「ログリストを縮める」を復活
○動画ダウンロード時に新規ウィンドウを開かないように変更

★flvplayer_wrapper custom 2007/10/16版
○動画タイトルの取得(javascriptによる)は、wrapper読み込み時ではなく動画ダウンロード時に実行するように変更
wrapper読み込み時にはjavascriptを実行しないようになったので、多分iroiroや市場生成のjsと衝突しなくなったはず

★flvplayer_wrapper custom 2007/10/15版
○プレミアム会員が一般回線で視聴できない問題を多分修正
○いろいろ問題があるので「上を隠す」「縦を縮める」を廃止してレイアウト統一
○タグ及びマイリストの自動リンク検索(javascriptによる)は、wrapper読み込み時ではなくLINKボタン初回押下時に実行するように変更
○ホイールシークがOFFのときはホイールでボリュームを増減するように変更（変化量はとりあえず５％、少なすぎるかも？）
○新規ウィンドウを開く処理を多少変更

★flvplayer_wrapper custom 2007/10/14版
○設定からコメント保持数を制御できるようにした。0で無制限に保持する。
○マイメモリー再生がうまく認識できなかった問題を修正。
マイメモリー再生時にローカルFLVサーバが使えない問題は未解決。
○カスタムフィルタの「今すぐ適用」ボタンが消えていた問題を修正
○ホイールシークの移動量を設定できるように変更
○強調表示時のボタン類の位置がずれていたので修正

★flvplayer_wrapper custom 2007/10/13版
○カスタムフィルタのnormalが効かなかった問題の修正
○カスタムフィルタのtypo修正とJavaScriptでのリサイズを修正

★flvplayer_wrapper custom 2007/10/12_2版
○新規ログ取得時にフィルターや強調表示が正常に動作しない問題を多分修正

★flvplayer_wrapper custom 2007/10/12版
○NGID追加時にスクリーン上のメッセージが消えない問題を修正
○画像をRC2仕様に更新、強調表示モードの画像も復帰
それに伴いフィルタ−１のサイズを微妙に変更
○ローカル再生アイコンをエコノミーアイコンの上に移動
○ヘッダフィルタをbothに変更（bothでないと動かない人がいる模様）

★flvplayer_wrapper custom 2007/10/11_2版
○「上を隠す」「縮める」の設定で微妙にサイズを調整できるように（再起動が必要）
それに伴いフィルタ−１のサイズ変更
（「強調表示モード」の画像表示はうまくいかないので保留）
○マイリスト読込が出来なかった問題の修正
○color=allが全コメントに効いていた問題の修正、ついでにplace=allとsize=allを実装

★flvplayer_wrapper custom 2007/10/11版
細かい変更を何か忘れているかも・・・
○RC2の仕様変更への対応
○マイメモリーのコメント編集ができるように変更
○コメントクリック時の本文コピーを追加
○LINKボタンを押すまでリンクウィンドウを開かないように変更
○ホイールシーク時、一時停止を解除しないように変更
○DLボタンを押したときvideo_titleをコピー＆ボタンの消失時間を少し短縮